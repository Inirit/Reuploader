{"version":3,"file":"background.bundle.js","sources":["../../../ts/handlers/HandlerType.ts","../../../node_modules/strongly-typed-events/strongly-typed-events.js","../../../ts/options/ExtensionOptionsBase.ts","../../../ts/options/ImgurOptions.ts","../../../ts/handlers/HandlerBase.ts","../../../ts/handlers/ImgurHandler.ts","../../../ts/handlers/PomfHandler.ts","../../../ts/handlers/PostImage.ts","../../../ts/options/PrimaryOptions.ts","../../../ts/BackgroundMain.ts"],"sourcesContent":["enum HandlerType\r\n{\r\n\tPomf,\r\n\tImgur,\r\n\tPostImage\r\n}\r\n\r\nexport default HandlerType;\r\n","/*!\r\n * Strongly Typed Events for TypeScript - 1.0.1\r\n * https://github.com/KeesCBakker/StronlyTypedEvents/\r\n * http://keestalkstech.com\r\n *\r\n * Copyright Kees C. Bakker / KeesTalksTech\r\n * Released under the MIT license\r\n */\r\n\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\n\"use strict\";\r\n/**\r\n * Stores a handler. Manages execution meta data.\r\n * @class Subscription\r\n * @template TEventHandler\r\n */\r\nvar Subscription = (function () {\r\n    /**\r\n     * Creates an instance of Subscription.\r\n     *\r\n     * @param {TEventHandler} handler The handler for the subscription.\r\n     * @param {boolean} isOnce Indicates if the handler should only be executed` once.\r\n     */\r\n    function Subscription(handler, isOnce) {\r\n        this.handler = handler;\r\n        this.isOnce = isOnce;\r\n        /**\r\n         * Indicates if the subscription has been executed before.\r\n         */\r\n        this.isExecuted = false;\r\n    }\r\n    /**\r\n     * Executes the handler.\r\n     *\r\n     * @param {boolean} executeAsync True if the even should be executed async.\r\n     * @param {*} The scope the scope of the event.\r\n     * @param {IArguments} args The arguments for the event.\r\n     */\r\n    Subscription.prototype.execute = function (executeAsync, scope, args) {\r\n        if (!this.isOnce || !this.isExecuted) {\r\n            this.isExecuted = true;\r\n            var fn = this.handler;\r\n            if (executeAsync) {\r\n                setTimeout(function () {\r\n                    fn.apply(scope, args);\r\n                }, 1);\r\n            }\r\n            else {\r\n                fn.apply(scope, args);\r\n            }\r\n        }\r\n    };\r\n    return Subscription;\r\n}());\r\nexports.Subscription = Subscription;\r\n/**\r\n * Base class for implementation of the dispatcher. It facilitates the subscribe\r\n * and unsubscribe methods based on generic handlers. The TEventType specifies\r\n * the type of event that should be exposed. Use the asEvent to expose the\r\n * dispatcher as event.\r\n */\r\nvar DispatcherBase = (function () {\r\n    function DispatcherBase() {\r\n        this._wrap = new DispatcherWrapper(this);\r\n        this._subscriptions = new Array();\r\n    }\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherBase.prototype.subscribe = function (fn) {\r\n        if (fn) {\r\n            this._subscriptions.push(new Subscription(fn, false));\r\n        }\r\n    };\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherBase.prototype.sub = function (fn) {\r\n        this.subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribe once to the event with the specified name.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherBase.prototype.one = function (fn) {\r\n        if (fn) {\r\n            this._subscriptions.push(new Subscription(fn, true));\r\n        }\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherBase.prototype.has = function (fn) {\r\n        if (fn) {\r\n            for (var _i = 0, _a = this._subscriptions; _i < _a.length; _i++) {\r\n                var sub = _a[_i];\r\n                if (sub.handler == fn) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Unsubscribes the handler from the dispatcher.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherBase.prototype.unsubscribe = function (fn) {\r\n        if (fn) {\r\n            for (var i = 0; i < this._subscriptions.length; i++) {\r\n                var sub = this._subscriptions[i];\r\n                if (sub.handler == fn) {\r\n                    this._subscriptions.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Unsubscribes the handler from the dispatcher.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherBase.prototype.unsub = function (fn) {\r\n        this.unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Generic dispatch will dispatch the handlers with the given arguments.\r\n     *\r\n     * @protected\r\n     * @param {boolean} executeAsync True if the even should be executed async.\r\n     * @param {*} The scope the scope of the event.\r\n     * @param {IArguments} args The arguments for the event.\r\n     */\r\n    DispatcherBase.prototype._dispatch = function (executeAsync, scope, args) {\r\n        for (var i = 0; i < this._subscriptions.length; i++) {\r\n            var sub = this._subscriptions[i];\r\n            if (sub.isOnce) {\r\n                if (sub.isExecuted === true) {\r\n                    continue;\r\n                }\r\n                this._subscriptions.splice(i, 1);\r\n                i--;\r\n            }\r\n            sub.execute(executeAsync, scope, args);\r\n        }\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    DispatcherBase.prototype.asEvent = function () {\r\n        return this._wrap;\r\n    };\r\n    /**\r\n     * Clears all the subscriptions.\r\n     */\r\n    DispatcherBase.prototype.clear = function () {\r\n        this._subscriptions.splice(0, this._subscriptions.length);\r\n    };\r\n    return DispatcherBase;\r\n}());\r\nexports.DispatcherBase = DispatcherBase;\r\n/**\r\n * Dispatcher implementation for events. Can be used to subscribe, unsubscribe\r\n * or dispatch events. Use the ToEvent() method to expose the event.\r\n */\r\nvar EventDispatcher = (function (_super) {\r\n    __extends(EventDispatcher, _super);\r\n    /**\r\n     * Creates a new EventDispatcher instance.\r\n     */\r\n    function EventDispatcher() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Dispatches the event.\r\n     * @param sender The sender.\r\n     * @param args The arguments object.\r\n     */\r\n    EventDispatcher.prototype.dispatch = function (sender, args) {\r\n        this._dispatch(false, this, arguments);\r\n    };\r\n    /**\r\n     * Dispatches the events thread.\r\n     * @param sender The sender.\r\n     * @param args The arguments object.\r\n     */\r\n    EventDispatcher.prototype.dispatchAsync = function (sender, args) {\r\n        this._dispatch(true, this, arguments);\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    EventDispatcher.prototype.asEvent = function () {\r\n        return _super.prototype.asEvent.call(this);\r\n    };\r\n    return EventDispatcher;\r\n}(DispatcherBase));\r\nexports.EventDispatcher = EventDispatcher;\r\n/**\r\n * The dispatcher handles the storage of subsciptions and facilitates\r\n * subscription, unsubscription and dispatching of a simple event\r\n */\r\nvar SimpleEventDispatcher = (function (_super) {\r\n    __extends(SimpleEventDispatcher, _super);\r\n    /**\r\n     * Creates a new SimpleEventDispatcher instance.\r\n     */\r\n    function SimpleEventDispatcher() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Dispatches the event.\r\n     * @param args The arguments object.\r\n     */\r\n    SimpleEventDispatcher.prototype.dispatch = function (args) {\r\n        this._dispatch(false, this, arguments);\r\n    };\r\n    /**\r\n     * Dispatches the events thread.\r\n     * @param args The arguments object.\r\n     */\r\n    SimpleEventDispatcher.prototype.dispatchAsync = function (args) {\r\n        this._dispatch(true, this, arguments);\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    SimpleEventDispatcher.prototype.asEvent = function () {\r\n        return _super.prototype.asEvent.call(this);\r\n    };\r\n    return SimpleEventDispatcher;\r\n}(DispatcherBase));\r\nexports.SimpleEventDispatcher = SimpleEventDispatcher;\r\n/**\r\n * The dispatcher handles the storage of subsciptions and facilitates\r\n * subscription, unsubscription and dispatching of a signal event.\r\n */\r\nvar SignalDispatcher = (function (_super) {\r\n    __extends(SignalDispatcher, _super);\r\n    /**\r\n     * Creates a new SignalDispatcher instance.\r\n     */\r\n    function SignalDispatcher() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Dispatches the signal.\r\n     */\r\n    SignalDispatcher.prototype.dispatch = function () {\r\n        this._dispatch(false, this, arguments);\r\n    };\r\n    /**\r\n     * Dispatches the signal threaded.\r\n     */\r\n    SignalDispatcher.prototype.dispatchAsync = function () {\r\n        this._dispatch(true, this, arguments);\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    SignalDispatcher.prototype.asEvent = function () {\r\n        return _super.prototype.asEvent.call(this);\r\n    };\r\n    return SignalDispatcher;\r\n}(DispatcherBase));\r\nexports.SignalDispatcher = SignalDispatcher;\r\n/**\r\n * Hides the implementation of the event dispatcher. Will expose methods that\r\n * are relevent to the event.\r\n */\r\nvar DispatcherWrapper = (function () {\r\n    /**\r\n     * Creates a new EventDispatcherWrapper instance.\r\n     * @param dispatcher The dispatcher.\r\n     */\r\n    function DispatcherWrapper(dispatcher) {\r\n        this._subscribe = function (fn) { return dispatcher.subscribe(fn); };\r\n        this._unsubscribe = function (fn) { return dispatcher.unsubscribe(fn); };\r\n        this._one = function (fn) { return dispatcher.one(fn); };\r\n        this._has = function (fn) { return dispatcher.has(fn); };\r\n        this._clear = function () { return dispatcher.clear(); };\r\n    }\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherWrapper.prototype.subscribe = function (fn) {\r\n        this._subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherWrapper.prototype.sub = function (fn) {\r\n        this.subscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribe from the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherWrapper.prototype.unsubscribe = function (fn) {\r\n        this._unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribe from the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherWrapper.prototype.unsub = function (fn) {\r\n        this.unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribe once to the event with the specified name.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherWrapper.prototype.one = function (fn) {\r\n        this._one(fn);\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherWrapper.prototype.has = function (fn) {\r\n        return this._has(fn);\r\n    };\r\n    /**\r\n     * Clears all the subscriptions.\r\n     */\r\n    DispatcherWrapper.prototype.clear = function () {\r\n        this._clear();\r\n    };\r\n    return DispatcherWrapper;\r\n}());\r\nexports.DispatcherWrapper = DispatcherWrapper;\r\n/**\r\n * Base class for event lists classes. Implements the get and remove.\r\n */\r\nvar EventListBase = (function () {\r\n    function EventListBase() {\r\n        this._events = {};\r\n    }\r\n    /**\r\n     * Gets the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    EventListBase.prototype.get = function (name) {\r\n        var event = this._events[name];\r\n        if (event) {\r\n            return event;\r\n        }\r\n        event = this.createDispatcher();\r\n        this._events[name] = event;\r\n        return event;\r\n    };\r\n    /**\r\n     * Removes the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    EventListBase.prototype.remove = function (name) {\r\n        this._events[name] = null;\r\n    };\r\n    return EventListBase;\r\n}());\r\nexports.EventListBase = EventListBase;\r\n/**\r\n * Storage class for multiple events that are accessible by name.\r\n * Events dispatchers are automatically created.\r\n */\r\nvar EventList = (function (_super) {\r\n    __extends(EventList, _super);\r\n    /**\r\n     * Creates a new EventList instance.\r\n     */\r\n    function EventList() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    EventList.prototype.createDispatcher = function () {\r\n        return new EventDispatcher();\r\n    };\r\n    return EventList;\r\n}(EventListBase));\r\nexports.EventList = EventList;\r\n/**\r\n * Storage class for multiple simple events that are accessible by name.\r\n * Events dispatchers are automatically created.\r\n */\r\nvar SimpleEventList = (function (_super) {\r\n    __extends(SimpleEventList, _super);\r\n    /**\r\n     * Creates a new SimpleEventList instance.\r\n     */\r\n    function SimpleEventList() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    SimpleEventList.prototype.createDispatcher = function () {\r\n        return new SimpleEventDispatcher();\r\n    };\r\n    return SimpleEventList;\r\n}(EventListBase));\r\nexports.SimpleEventList = SimpleEventList;\r\n/**\r\n * Storage class for multiple signal events that are accessible by name.\r\n * Events dispatchers are automatically created.\r\n */\r\nvar SignalList = (function (_super) {\r\n    __extends(SignalList, _super);\r\n    /**\r\n     * Creates a new SignalList instance.\r\n     */\r\n    function SignalList() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    SignalList.prototype.createDispatcher = function () {\r\n        return new SignalDispatcher();\r\n    };\r\n    return SignalList;\r\n}(EventListBase));\r\nexports.SignalList = SignalList;\r\n/**\r\n * Extends objects with event handling capabilities.\r\n */\r\nvar EventHandlingBase = (function () {\r\n    function EventHandlingBase() {\r\n        this._events = new EventList();\r\n    }\r\n    Object.defineProperty(EventHandlingBase.prototype, \"events\", {\r\n        /**\r\n         * Gets the list with all the event dispatchers.\r\n         */\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.subscribe = function (name, fn) {\r\n        this._events.get(name).subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.sub = function (name, fn) {\r\n        this.subscribe(name, fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.unsubscribe = function (name, fn) {\r\n        this._events.get(name).unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.unsub = function (name, fn) {\r\n        this.unsubscribe(name, fn);\r\n    };\r\n    /**\r\n     * Subscribes to once the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.one = function (name, fn) {\r\n        this._events.get(name).one(fn);\r\n    };\r\n    /**\r\n     * Subscribes to once the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.has = function (name, fn) {\r\n        return this._events.get(name).has(fn);\r\n    };\r\n    return EventHandlingBase;\r\n}());\r\nexports.EventHandlingBase = EventHandlingBase;\r\n/**\r\n * Extends objects with simple event handling capabilities.\r\n */\r\nvar SimpleEventHandlingBase = (function () {\r\n    function SimpleEventHandlingBase() {\r\n        this._events = new SimpleEventList();\r\n    }\r\n    Object.defineProperty(SimpleEventHandlingBase.prototype, \"events\", {\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.subscribe = function (name, fn) {\r\n        this._events.get(name).subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.sub = function (name, fn) {\r\n        this.subscribe(name, fn);\r\n    };\r\n    /**\r\n     * Subscribes once to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.one = function (name, fn) {\r\n        this._events.get(name).one(fn);\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.has = function (name, fn) {\r\n        return this._events.get(name).has(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.unsubscribe = function (name, fn) {\r\n        this._events.get(name).unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.unsub = function (name, fn) {\r\n        this.unsubscribe(name, fn);\r\n    };\r\n    return SimpleEventHandlingBase;\r\n}());\r\nexports.SimpleEventHandlingBase = SimpleEventHandlingBase;\r\n/**\r\n * Extends objects with signal event handling capabilities.\r\n */\r\nvar SignalHandlingBase = (function () {\r\n    function SignalHandlingBase() {\r\n        this._events = new SignalList();\r\n    }\r\n    Object.defineProperty(SignalHandlingBase.prototype, \"events\", {\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribes once to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.one = function (name, fn) {\r\n        this._events.get(name).one(fn);\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.has = function (name, fn) {\r\n        return this._events.get(name).has(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.subscribe = function (name, fn) {\r\n        this._events.get(name).subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.sub = function (name, fn) {\r\n        this.subscribe(name, fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.unsubscribe = function (name, fn) {\r\n        this._events.get(name).unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.unsub = function (name, fn) {\r\n        this.unsubscribe(name, fn);\r\n    };\r\n    return SignalHandlingBase;\r\n}());\r\nexports.SignalHandlingBase = SignalHandlingBase;\r\nfunction createEventDispatcher() {\r\n    return new EventDispatcher();\r\n}\r\nexports.createEventDispatcher = createEventDispatcher;\r\n;\r\nfunction createEventList() {\r\n    return new EventList();\r\n}\r\nexports.createEventList = createEventList;\r\nfunction createSimpleEventDispatcher() {\r\n    return new SimpleEventDispatcher();\r\n}\r\nexports.createSimpleEventDispatcher = createSimpleEventDispatcher;\r\n;\r\nfunction createSimpleEventList() {\r\n    return new SimpleEventList();\r\n}\r\nexports.createSimpleEventList = createSimpleEventList;\r\nfunction createSignalDispatcher() {\r\n    return new SignalDispatcher();\r\n}\r\nexports.createSignalDispatcher = createSignalDispatcher;\r\n;\r\nfunction createSignalList() {\r\n    return new SignalList();\r\n}\r\nexports.createSignalList = createSignalList;\r\n;\r\nvar StronglyTypedEventsStatic = {\r\n    EventList: EventList,\r\n    SimpleEventList: SimpleEventList,\r\n    SignalList: SignalList,\r\n    createEventList: createEventList,\r\n    createSimpleEventList: createSimpleEventList,\r\n    createSignalList: createSignalList,\r\n    EventDispatcher: EventDispatcher,\r\n    SimpleEventDispatcher: SimpleEventDispatcher,\r\n    SignalDispatcher: SignalDispatcher,\r\n    EventHandlingBase: EventHandlingBase,\r\n    SimpleEventHandlingBase: SimpleEventHandlingBase,\r\n    SignalHandlingBase: SignalHandlingBase,\r\n    createEventDispatcher: createEventDispatcher,\r\n    createSimpleEventDispatcher: createSimpleEventDispatcher,\r\n    createSignalDispatcher: createSignalDispatcher,\r\n    EventListBase: EventListBase,\r\n    DispatcherBase: DispatcherBase,\r\n    DispatcherWrapper: DispatcherWrapper\r\n};\r\nexports.IStronglyTypedEvents = StronglyTypedEventsStatic;\r\nvar _e = exports.IStronglyTypedEvents;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.default = StronglyTypedEventsStatic;\r\n","abstract class ExtensionOptionsBase\r\n{\r\n\tprotected static async GetOptions(defaultOptions: browser.storage.StorageObject): Promise<browser.storage.StorageObject>\r\n\t{\r\n\t\tconst options = await browser.storage.local.get(defaultOptions);\r\n\r\n\t\treturn options;\r\n\t}\r\n\r\n\tprotected static async GetOption<T extends browser.storage.StorageValue>(name: string, defaultOptions: browser.storage.StorageObject)\r\n\t{\r\n\t\tconst options = await this.GetOptions(defaultOptions);\r\n\t\tconst value = options[name];\r\n\r\n\t\tconsole.debug(`Got '${name}' with value '${value}'`);\r\n\r\n\t\treturn value as T;\r\n\t}\r\n\r\n\tprotected static async SetOption(name: string, value: browser.storage.StorageValue)\r\n\t{\r\n\t\tconsole.debug(`Setting '${name}' to '${value}'`);\r\n\r\n\t\tif (value)\r\n\t\t{\r\n\t\t\tconst options = await browser.storage.local.get(name);\r\n\t\t\toptions[name] = value;\r\n\r\n\t\t\tawait browser.storage.local.set(options);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tawait browser.storage.local.remove(name);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ExtensionOptionsBase;\r\n","import { ISimpleEvent, SimpleEventDispatcher } from \"strongly-typed-events\";\r\n\r\nimport ExtensionOptionsBase from \"./ExtensionOptionsBase\";\r\n\r\nclass ImgurOptions extends ExtensionOptionsBase\r\n{\r\n\tpublic static readonly ClientId: string = \"4a4f81163ed1219\";\r\n\tpublic static readonly ClientSecret: string = \"20e4c6d9d9cbc2554f08bd2c8c450b271cda7bb8\";\r\n\r\n\tprivate static readonly _defaultOptions: browser.storage.StorageObject = {\r\n\t\tAccessToken: undefined,\r\n\t\tExpirationTime: undefined,\r\n\t\tTokenType: undefined,\r\n\t\tRefreshToken: undefined,\r\n\t\tAccountName: undefined,\r\n\t\tAccountId: undefined\r\n\t};\r\n\r\n\tprivate static readonly _accessTokenName = \"AccessToken\";\r\n\tprivate static readonly _expirationTime = \"ExpirationTime\";\r\n\tprivate static readonly _tokenTypeName = \"TokenType\";\r\n\tprivate static readonly _refreshTokenName = \"RefreshToken\";\r\n\tprivate static readonly _accountNameName = \"AccountName\";\r\n\tprivate static readonly _accountIdName = \"AccountId\";\r\n\r\n\tprivate static _authStateChange = new SimpleEventDispatcher<boolean>();\r\n\r\n\tpublic static get onAuthStateChange(): ISimpleEvent<boolean>\r\n\t{\r\n\t\treturn this._authStateChange.asEvent();\r\n\t}\r\n\r\n\tpublic static async GetAccessToken(): Promise<string>\r\n\t{\r\n\t\tconst value = await this.GetOption<string>(this._accessTokenName, this._defaultOptions);\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tpublic static async GetExpirationTime(): Promise<number>\r\n\t{\r\n\t\tconst value = await this.GetOption<number>(this._expirationTime, this._defaultOptions);\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tpublic static async GetTokenType(): Promise<string>\r\n\t{\r\n\t\tconst value = await this.GetOption<string>(this._tokenTypeName, this._defaultOptions);\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tpublic static async GetRefreshToken(): Promise<string>\r\n\t{\r\n\t\tconst value = await this.GetOption<string>(this._refreshTokenName, this._defaultOptions);\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tpublic static async GetAccountName(): Promise<string>\r\n\t{\r\n\t\tconst value = await this.GetOption<string>(this._accountNameName, this._defaultOptions);\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tpublic static async GetAccountId(): Promise<string>\r\n\t{\r\n\t\tconst value = await this.GetOption<string>(this._accountIdName, this._defaultOptions);\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tpublic static async SetAuthInfo(authInfo: string[])\r\n\t{\r\n\t\tconst currentAuthState = await this.IsAuthed();\r\n\r\n\t\tif (authInfo[\"error\"])\r\n\t\t{\r\n\t\t\tthis.ClearAuthInfo();\r\n\r\n\t\t\tconsole.debug(`SetAuthInfo failed with error: ${authInfo[\"error\"]}`);\r\n\t\t\tthrow new Error(`SetAuthInfo failed with error: ${authInfo[\"error\"]}`);\r\n\t\t}\r\n\r\n\t\tawait this.SetAccessToken(authInfo[\"access_token\"]);\r\n\t\tawait this.SetExpirationTime(authInfo[\"expires_in\"]);\r\n\t\tawait this.SetTokenType(authInfo[\"token_type\"]);\r\n\t\tawait this.SetRefreshToken(authInfo[\"refresh_token\"]);\r\n\t\tawait this.SetAccountName(authInfo[\"account_username\"]);\r\n\r\n\t\tconst newAuthState = await this.IsAuthed();\r\n\r\n\t\tif ((newAuthState && authInfo[\"account_id\"]) || !newAuthState)\r\n\t\t{\r\n\t\t\tawait this.SetAccountId(authInfo[\"account_id\"]);\r\n\t\t}\r\n\r\n\t\tif (currentAuthState !== newAuthState)\r\n\t\t{\r\n\t\t\tthis._authStateChange.dispatch(newAuthState);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static async ClearAuthInfo()\r\n\t{\r\n\t\tawait this.SetAuthInfo(new Array<string>());\r\n\t}\r\n\r\n\tpublic static async IsAuthed(): Promise<boolean>\r\n\t{\r\n\t\tlet isAuthed: boolean;\r\n\r\n\t\tif (await this.GetAccessToken())\r\n\t\t{\r\n\t\t\tisAuthed = true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tisAuthed = false;\r\n\t\t}\r\n\r\n\t\treturn isAuthed;\r\n\t}\r\n\r\n\tprivate static async SetAccessToken(value: string)\r\n\t{\r\n\t\tawait this.SetOption(this._accessTokenName, value);\r\n\t}\r\n\r\n\tprivate static async SetExpirationTime(value: string)\r\n\t{\r\n\t\tlet expirationTime: number;\r\n\r\n\t\tif (value)\r\n\t\t{\r\n\t\t\tconst expiresInMs = parseInt(value, 10) * 1000;\r\n\t\t\tconst currentTime = Date.now();\r\n\r\n\t\t\texpirationTime = currentTime + expiresInMs;\r\n\t\t}\r\n\r\n\t\tawait this.SetOption(this._expirationTime, expirationTime);\r\n\t}\r\n\r\n\tprivate static async SetTokenType(value: string)\r\n\t{\r\n\t\tawait this.SetOption(this._tokenTypeName, value);\r\n\t}\r\n\r\n\tprivate static async SetRefreshToken(value: string)\r\n\t{\r\n\t\tawait this.SetOption(this._refreshTokenName, value);\r\n\t}\r\n\r\n\tprivate static async SetAccountName(value: string)\r\n\t{\r\n\t\tawait this.SetOption(this._accountNameName, value);\r\n\t}\r\n\r\n\tprivate static async SetAccountId(value: string)\r\n\t{\r\n\t\tawait this.SetOption(this._accountIdName, value);\r\n\t}\r\n}\r\n\r\nexport default ImgurOptions;\r\n","import HandlerType from \"./HandlerType\";\r\nimport IHandler from \"./IHandler\";\r\n\r\nabstract class HandlerBase implements IHandler\r\n{\r\n\tabstract HandlerType: HandlerType;\r\n\r\n\tabstract HandleUpload(image: Blob): Promise<string>;\r\n\r\n\tpublic async ReuploadImage(originalImageUrl: string): Promise<string>\r\n\t{\r\n\t\tconst image: Blob = await this.FetchImage(originalImageUrl);\r\n\t\tconst uploadedUrl = await this.UploadImage(image);\r\n\r\n\t\treturn uploadedUrl;\r\n\t}\r\n\r\n\tprotected async UploadImage(image: Blob): Promise<string>\r\n\t{\r\n\t\tconst notificationId = await browser.notifications.create(\r\n\t\t\t`reupload_progress_${Date.now()}`, {\r\n\t\t\t\ttype: \"basic\",\r\n\t\t\t\ttitle: browser.i18n.getMessage(\"extensionName\"),\r\n\t\t\t\ticonUrl: \"./images/up_arrow.png\",\r\n\t\t\t\tmessage: browser.i18n.getMessage(\"notificationMessageReuploadProgress\", HandlerType[this.HandlerType])\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tsetTimeout(() =>\r\n\t\t{\r\n\t\t\tbrowser.notifications.clear(notificationId);\r\n\t\t}, 5000);\r\n\r\n\t\tconst uploadedUrl = await this.HandleUpload(image);\r\n\r\n\t\tawait browser.notifications.clear(notificationId);\r\n\r\n\t\treturn uploadedUrl;\r\n\t}\r\n\r\n\tprotected async FetchImage(imageUrl: string): Promise<Blob>\r\n\t{\r\n\t\tlet blob: Blob;\r\n\r\n\t\tawait $.ajax(\r\n\t\t\t{\r\n\t\t\t\turl: imageUrl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\txhr: this.GetFetchXhr\r\n\t\t\t}).then((data: Blob) =>\r\n\t\t\t{\r\n\t\t\t\tconsole.debug(`Image fetch complete. Size: ${data.size}, Type: ${data.type}`);\r\n\r\n\t\t\t\tblob = data;\r\n\t\t\t},\r\n\t\t\t(jqXHR, textStatus, error) =>\r\n\t\t\t{\r\n\t\t\t\tthis.HandleFetchError(jqXHR, textStatus, error);\r\n\t\t\t});\r\n\r\n\t\treturn blob;\r\n\t}\r\n\r\n\tprotected GetUploadXhr(): XMLHttpRequest\r\n\t{\r\n\t\tconst xhr = $.ajaxSettings.xhr();\r\n\r\n\t\tif (xhr.upload)\r\n\t\t{\r\n\t\t\txhr.upload.addEventListener(\"progress\", (e) =>\r\n\t\t\t{\r\n\t\t\t\tif (e.lengthComputable)\r\n\t\t\t\t{\r\n\t\t\t\t\tconst percentage = e.loaded / e.total * 100;\r\n\r\n\t\t\t\t\tconsole.debug(`Progress: ${percentage}%`);\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\t\t}\r\n\r\n\t\treturn xhr;\r\n\t}\r\n\r\n\tprotected GetFetchXhr(): XMLHttpRequest\r\n\t{\r\n\t\tconst xhr = $.ajaxSettings.xhr();\r\n\r\n\t\txhr.responseType = \"blob\";\r\n\r\n\t\treturn xhr;\r\n\t}\r\n\r\n\tprotected async HandleGeneralError(errorMessage: string)\r\n\t{\r\n\t\tconst notificationId = await browser.notifications.create(\r\n\t\t\t`reupload_failed_${Date.now()}`, {\r\n\t\t\t\ttype: \"basic\",\r\n\t\t\t\ttitle: browser.i18n.getMessage(\"extensionName\"),\r\n\t\t\t\ticonUrl: \"./images/up_arrow.png\",\r\n\t\t\t\tmessage: `${errorMessage}`\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tsetTimeout(() =>\r\n\t\t{\r\n\t\t\tbrowser.notifications.clear(notificationId);\r\n\t\t}, 10000);\r\n\t}\r\n\r\n\tprotected async HandleUploadError(jqXHR: JQuery.jqXHR, textStatus: JQuery.Ajax.ErrorTextStatus, error: string)\r\n\t{\r\n\t\tawait this.HandleGeneralError(browser.i18n.getMessage(\"errorImageFailedToUpload\", [textStatus, error]));\r\n\t}\r\n\r\n\tprotected async HandleFetchError(jqXHR: JQuery.jqXHR, textStatus: JQuery.Ajax.ErrorTextStatus, error: string)\r\n\t{\r\n\t\tawait this.HandleGeneralError(browser.i18n.getMessage(\"errorImageFailedToDownload\", [textStatus, error]));\r\n\t}\r\n}\r\n\r\nexport default HandlerBase;\r\n","import ImgurOptions from \"../options/ImgurOptions\";\r\nimport HandlerBase from \"./HandlerBase\";\r\nimport HandlerType from \"./HandlerType\";\r\n\r\nclass ImgurHandler extends HandlerBase\r\n{\r\n\tprivate readonly _baseUrl: string = \"https://api.imgur.com\";\r\n\r\n\tget HandlerType(): HandlerType\r\n\t{\r\n\t\treturn HandlerType.Imgur;\r\n\t}\r\n\r\n\tpublic async HandleUpload(image: Blob): Promise<string>\r\n\t{\r\n\t\tif (await this.NeedsRefresh())\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tawait this.RefreshImgurAuth();\r\n\t\t\t}\r\n\t\t\tcatch (e)\r\n\t\t\t{\r\n\t\t\t\tthis.HandleGeneralError(`Failed to upload image, authentication expired but refresh failed. ${e.message}`);\r\n\r\n\t\t\t\tawait ImgurOptions.ClearAuthInfo();\r\n\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst authorizationHeader = await this.GetAuthorizationHeader();\r\n\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\"image\", image, \"image.jpg\");\r\n\r\n\t\tconst ajaxSettings: JQuery.AjaxSettings<any> = {\r\n\t\t\turl: `${this._baseUrl}/3/image`,\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tdata: formData,\r\n\t\t\tcache: false,\r\n\t\t\tcontentType: false,\r\n\t\t\tprocessData: false,\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: authorizationHeader,\r\n\t\t\t\tAccept: \"application/json\"\r\n\t\t\t},\r\n\t\t\txhr: this.GetUploadXhr\r\n\t\t};\r\n\r\n\t\tlet uploadedUrl: string;\r\n\r\n\t\tawait $.ajax(ajaxSettings).then(\r\n\t\t\t(result) =>\r\n\t\t\t{\r\n\t\t\t\tif (result && result.data && result.data.link)\r\n\t\t\t\t{\r\n\t\t\t\t\tuploadedUrl = result.data.link;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.HandleGeneralError(\"Failed to upload image, unexpected response format from service.\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t(jqXHR, textStatus, error) =>\r\n\t\t\t{\r\n\t\t\t\tthis.HandleUploadError(jqXHR, textStatus, error);\r\n\t\t\t});\r\n\r\n\t\treturn uploadedUrl;\r\n\t}\r\n\r\n\tprivate async GetAuthorizationHeader(): Promise<string>\r\n\t{\r\n\t\tlet authorizationHeader: string;\r\n\t\tconst accessToken = await ImgurOptions.GetAccessToken();\r\n\r\n\t\tif (accessToken)\r\n\t\t{\r\n\t\t\tauthorizationHeader = `Bearer ${accessToken}`;\r\n\r\n\t\t\tconsole.debug(`Using access token for Imgur upload`);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tconst clientId = await ImgurOptions.ClientId;\r\n\t\t\tauthorizationHeader = `Client-ID ${clientId}`;\r\n\r\n\t\t\tconsole.debug(`Using client id for Imgur upload`);\r\n\t\t}\r\n\r\n\t\treturn authorizationHeader;\r\n\t}\r\n\r\n\tprivate async RefreshImgurAuth()\r\n\t{\r\n\t\tconsole.debug(\"Imgur auth refresh... \");\r\n\r\n\t\tconst redirectURL = browser.identity.getRedirectURL();\r\n\t\tconst clientId = await ImgurOptions.ClientId;\r\n\t\tconst refreshToken = await ImgurOptions.GetRefreshToken();\r\n\r\n\t\tconst body = {\r\n\t\t\tgrant_type: \"refresh_token\",\r\n\t\t\tclient_id: ImgurOptions.ClientId,\r\n\t\t\tclient_secret: ImgurOptions.ClientSecret,\r\n\t\t\trefresh_token: refreshToken\r\n\t\t};\r\n\r\n\t\tconst ajaxSettings: JQuery.AjaxSettings<any> = {\r\n\t\t\turl: `${this._baseUrl}/oauth2/token`,\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tdata: JSON.stringify(body),\r\n\t\t\tcache: false,\r\n\t\t\tcontentType: \"application/json\",\r\n\t\t\tprocessData: false,\r\n\t\t\theaders: {\r\n\t\t\t\tAccept: \"application/json\"\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet authInfo: string[];\r\n\r\n\t\tawait $.ajax(ajaxSettings).then(\r\n\t\t\t(result) =>\r\n\t\t\t{\r\n\t\t\t\tif (result)\r\n\t\t\t\t{\r\n\t\t\t\t\tauthInfo = result;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t(jqXHR, textStatus, error) =>\r\n\t\t\t{\r\n\t\t\t\tconsole.debug(`${textStatus} - ${error}`);\r\n\t\t\t});\r\n\r\n\t\tif (!authInfo)\r\n\t\t{\r\n\t\t\tthrow new Error(\"Failed to refresh auth, response was empty.\");\r\n\t\t}\r\n\r\n\t\tawait ImgurOptions.SetAuthInfo(authInfo);\r\n\t}\r\n\r\n\tprivate async NeedsRefresh(): Promise<boolean>\r\n\t{\r\n\t\tconst currentTime = Date.now();\r\n\t\tconst expirationTime = await ImgurOptions.GetExpirationTime();\r\n\t\tconst needsRefresh = expirationTime && expirationTime <= currentTime;\r\n\r\n\t\treturn needsRefresh;\r\n\t}\r\n}\r\n\r\nexport default ImgurHandler;\r\n","import HandlerBase from \"./HandlerBase\";\r\nimport HandlerType from \"./HandlerType\";\r\n\r\nclass PomfHandler extends HandlerBase\r\n{\r\n\tprivate readonly _uploadUrl: string = \"https://pomf.cat/upload.php\";\r\n\tprivate readonly _uploadPrefix: string = \"https://a.pomf.cat/\";\r\n\r\n\tget HandlerType(): HandlerType\r\n\t{\r\n\t\treturn HandlerType.Pomf;\r\n\t}\r\n\r\n\tpublic async HandleUpload(image: Blob): Promise<string>\r\n\t{\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\"files[]\", image, \"image.jpg\");\r\n\r\n\t\tconst ajaxSettings: JQuery.AjaxSettings<any> = {\r\n\t\t\turl: this._uploadUrl,\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tdata: formData,\r\n\t\t\tcache: false,\r\n\t\t\tcontentType: false,\r\n\t\t\tprocessData: false,\r\n\t\t\txhr: this.GetUploadXhr\r\n\t\t};\r\n\r\n\t\tlet uploadedUrl: string;\r\n\r\n\t\tawait $.ajax(ajaxSettings).then(\r\n\t\t\t(data) =>\r\n\t\t\t{\r\n\t\t\t\tif (data && data.files)\r\n\t\t\t\t{\r\n\t\t\t\t\tconst uploadedFile = data.files[0];\r\n\t\t\t\t\tconst uploadedFileName = uploadedFile.url;\r\n\r\n\t\t\t\t\tuploadedUrl = `${this._uploadPrefix}${uploadedFileName}`;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.HandleGeneralError(\"Failed to upload image, unexpected response format from service.\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t(jqXHR, textStatus, error) =>\r\n\t\t\t{\r\n\t\t\t\tthis.HandleUploadError(jqXHR, textStatus, error);\r\n\t\t\t});\r\n\r\n\t\treturn uploadedUrl;\r\n\t}\r\n}\r\n\r\nexport default PomfHandler;\r\n","import * as blobUtil from \"blob-util\";\r\n\r\nimport HandlerBase from \"./HandlerBase\";\r\nimport HandlerType from \"./HandlerType\";\r\n\r\n/*\r\nThe functionality for this service is based on the network traffic from their Windows screen cap tool:\r\nhttp://postimages.org/app.\r\n*/\r\n\r\nclass PostImageData\r\n{\r\n\t// Probably just an API key assigned to their screen cap tool\r\n\tpublic key: string = \"8ca0b57a6bb9c4c33cd9e7ab8e6a7f05\";\r\n\r\n\t// I don't know what this is\r\n\tpublic o: string = \"2b819584285c102318568238c7d4a4c7\";\r\n\r\n\t// I don't know what this is\r\n\tpublic m: string = \"fb733cccce28e7db3ff9f17d7ccff3d1\";\r\n\r\n\t// API usage can be denied based on version number, may need to update this in the future\r\n\tpublic version: string = \"1.0.1\";\r\n\r\n\t// Name of the image after being uploaded\r\n\tpublic name: string = \"image\";\r\n\r\n\t// This doesn't seem to matter (e.g. a png will be uploaded as a png), but the value is required.\r\n\tpublic type: string = \"jpg\";\r\n\r\n\t// The image data as a base64 string\r\n\tpublic image: string;\r\n\r\n\tconstructor(imageBase64: string)\r\n\t{\r\n\t\tthis.image = imageBase64;\r\n\t}\r\n}\r\n\r\nclass PostImageHandler extends HandlerBase\r\n{\r\n\t// Determined by observing network traffic from their screencap tool\r\n\tprivate readonly _uploadUrl: string = \"http://api.postimage.org/1/upload\";\r\n\r\n\tget HandlerType(): HandlerType\r\n\t{\r\n\t\treturn HandlerType.PostImage;\r\n\t}\r\n\r\n\tpublic async HandleUpload(image: Blob): Promise<string>\r\n\t{\r\n\t\tconst dataUrl = await blobUtil.blobToBase64String(image);\r\n\t\tconst uploadData = new PostImageData(dataUrl);\r\n\r\n\t\tconst ajaxSettings: JQuery.AjaxSettings<any> = {\r\n\t\t\turl: this._uploadUrl,\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tdata: uploadData,\r\n\t\t\txhr: this.GetUploadXhr\r\n\t\t};\r\n\r\n\t\tlet uploadedUrl: string;\r\n\r\n\t\tawait $.ajax(ajaxSettings).then(\r\n\t\t\t(data) =>\r\n\t\t\t{\r\n\t\t\t\tconst xml = $(data);\r\n\t\t\t\tconst link = xml.find(\"hotlink\");\r\n\r\n\t\t\t\tif (link && link.length > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tuploadedUrl = link.text();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tconsole.error(\"Upload to PostImage faile but with a successful status code, potentially requires updating handling.\");\r\n\t\t\t\t\tconsole.error(data);\r\n\r\n\t\t\t\t\tthis.HandleGeneralError(\"Failed to upload image due to an unknown error.\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t(jqXHR, textStatus, error) =>\r\n\t\t\t{\r\n\t\t\t\tthis.HandleUploadError(jqXHR, textStatus, error);\r\n\t\t\t});\r\n\r\n\t\treturn uploadedUrl;\r\n\t}\r\n}\r\n\r\nexport default PostImageHandler;\r\n","import HandlerType from \"../handlers/HandlerType\";\r\nimport ExtensionOptionsBase from \"./ExtensionOptionsBase\";\r\n\r\nclass PrimaryOptions extends ExtensionOptionsBase\r\n{\r\n\tpublic static EnabledHandlers: HandlerType[] = [\r\n\t\tHandlerType.Imgur,\r\n\t\tHandlerType.Pomf,\r\n\t\tHandlerType.PostImage\r\n\t];\r\n\r\n\tprivate static readonly _handlerTypeName = \"HandlerType\";\r\n\r\n\tprivate static readonly _defaultOptions: browser.storage.StorageObject = {\r\n\t\tHandlerType: `${HandlerType.Imgur}`\r\n\t};\r\n\r\n\tpublic static async GetHandlerType(): Promise<HandlerType>\r\n\t{\r\n\t\tconst handler = await this.GetOption<HandlerType>(this._handlerTypeName, this._defaultOptions);\r\n\r\n\t\treturn handler;\r\n\t}\r\n\r\n\tpublic static async SetHandlerType(value: HandlerType)\r\n\t{\r\n\t\tawait this.SetOption(this._handlerTypeName, value);\r\n\t}\r\n}\r\n\r\nexport default PrimaryOptions;\r\n","import HandlerType from \"./handlers/HandlerType\";\r\nimport IHandler from \"./handlers/IHandler\";\r\nimport ImgurHandler from \"./handlers/ImgurHandler\";\r\nimport PomfHandler from \"./handlers/PomfHandler\";\r\nimport PostImageHandler from \"./handlers/PostImage\";\r\nimport PrimaryOptions from \"./options/PrimaryOptions\";\r\n\r\nfunction HandleOnCreated()\r\n{\r\n\tif (browser.runtime.lastError)\r\n\t{\r\n\t\tconsole.error(`Error: ${browser.runtime.lastError}`);\r\n\t}\r\n}\r\n\r\nasync function HandleGeneralError(errorMessage: string)\r\n{\r\n\tconst notificationId = await browser.notifications.create(\r\n\t\t`reupload_failed_${Date.now()}`, {\r\n\t\t\ttype: \"basic\",\r\n\t\t\ttitle: browser.i18n.getMessage(\"extensionName\"),\r\n\t\t\ticonUrl: \"./images/up_arrow.png\",\r\n\t\t\tmessage: `${errorMessage}`\r\n\t\t}\r\n\t);\r\n\r\n\tsetTimeout(() =>\r\n\t{\r\n\t\tbrowser.notifications.clear(notificationId);\r\n\t}, 10000);\r\n}\r\n\r\nasync function HandleReuploadOnClick(info: browser.contextMenus.OnClickData, tab: browser.tabs.Tab)\r\n{\r\n\tif (info.menuItemId === \"reuploadMenuItem\")\r\n\t{\r\n\t\tconst currentHandler = await PrimaryOptions.GetHandlerType();\r\n\t\tlet handler: IHandler;\r\n\r\n\t\tswitch (+currentHandler)\r\n\t\t{\r\n\t\t\tcase HandlerType.Imgur:\r\n\t\t\t\thandler = new ImgurHandler();\r\n\t\t\t\tbreak;\r\n\t\t\tcase HandlerType.Pomf:\r\n\t\t\t\thandler = new PomfHandler();\r\n\t\t\t\tbreak;\r\n\t\t\tcase HandlerType.PostImage:\r\n\t\t\t\thandler = new PostImageHandler();\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tHandleGeneralError(browser.i18n.getMessage(\"errorHandlerTypeNotSupported\", HandlerType[currentHandler]));\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif (handler)\r\n\t\t{\r\n\t\t\tif (info.srcUrl)\r\n\t\t\t{\r\n\t\t\t\tconst uploadedUrl = await handler.ReuploadImage(info.srcUrl);\r\n\r\n\t\t\t\tif (uploadedUrl)\r\n\t\t\t\t{\r\n\t\t\t\t\tawait browser.tabs.sendMessage(tab.id, { url: uploadedUrl });\r\n\r\n\t\t\t\t\tconst notificationId = await browser.notifications.create(\r\n\t\t\t\t\t\t`copy_complete_${Date.now()}`, {\r\n\t\t\t\t\t\t\ttype: \"basic\",\r\n\t\t\t\t\t\t\ttitle: browser.i18n.getMessage(\"extensionName\"),\r\n\t\t\t\t\t\t\ticonUrl: \"./images/up_arrow.png\",\r\n\t\t\t\t\t\t\tmessage: browser.i18n.getMessage(\"notificationMessageCopyToClipboard\", uploadedUrl)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tsetTimeout(() =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tbrowser.notifications.clear(notificationId);\r\n\t\t\t\t\t}, 5000);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tHandleGeneralError(browser.i18n.getMessage(\"errorImageSourceUrl\"));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nasync function Initialize()\r\n{\r\n\tconsole.debug(`Initializing...`);\r\n\r\n\tbrowser.contextMenus.create(\r\n\t\t{\r\n\t\t\tid: \"reuploadMenuItem\",\r\n\t\t\ttitle: browser.i18n.getMessage(\"reuploadMenuItemLabel\"),\r\n\t\t\tcontexts: [\"image\"]\r\n\t\t}, (HandleOnCreated));\r\n\r\n\tbrowser.contextMenus.onClicked.addListener(HandleReuploadOnClick);\r\n\r\n\tconsole.debug(`Initialization complete.`);\r\n}\r\n\r\nInitialize();\r\n"],"names":["this","SimpleEventDispatcher","HandlerType","blobUtil.blobToBase64String"],"mappings":"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"}